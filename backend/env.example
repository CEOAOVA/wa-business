# ========================================
# VARIABLES DE ENTORNO - BACKEND
# WhatsApp Business Platform
# ========================================

# ========================================
# CONFIGURACIÓN DEL SERVIDOR
# ========================================
NODE_ENV=development
PORT=3002
BACKEND_URL=http://localhost:3002
FRONTEND_URL=http://localhost:5173

# ========================================
# WHATSAPP BUSINESS API
# ========================================
# NOTA: Estas variables NO están configuradas aún
# Necesitas crear una app en Meta for Developers
# y obtener el webhook de WhatsApp Business Cloud API

WHATSAPP_ACCESS_TOKEN=tu_access_token_aqui
WHATSAPP_PHONE_NUMBER_ID=tu_phone_number_id_aqui
WHATSAPP_API_VERSION=v22.0
WHATSAPP_BASE_URL=https://graph.facebook.com

# Configuración de webhook (para cuando configures WhatsApp)
WEBHOOK_VERIFY_TOKEN=tu_webhook_verify_token_aqui
WEBHOOK_PATH=/api/chat/webhook
WEBHOOK_URL=tu_dominio_aqui/api/chat/webhook

# ========================================
# CONFIGURACIÓN DE LLM/IA
# ========================================
# OpenRouter API Key para el chatbot con IA
# Obtener gratis en: https://openrouter.ai/keys
OPEN_ROUTER_API_KEY=tu_openrouter_api_key_aqui
OPEN_ROUTER_BASE_URL=https://openrouter.ai/api/v1
OPEN_ROUTER_DEFAULT_MODEL=google/gemini-flash-1.5
DEFAULT_TEMPERATURE=0.7
DEFAULT_MAX_TOKENS=1000
LLM_TIMEOUT_MS=60000

# ========================================
# BASE DE DATOS
# ========================================
# Para desarrollo local (SQLite)
DATABASE_URL="file:./prisma/whatsapp.db"

# Para producción con PostgreSQL (opcional)
# DATABASE_URL="postgresql://user:password@localhost:5432/wa_business"

# ========================================
# SEGURIDAD Y AUTENTICACIÓN
# ========================================
JWT_SECRET=tu_jwt_secret_super_seguro_aqui
JWT_EXPIRES_IN=8h

# CORS - Dominios permitidos
CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# Usuarios autorizados (para pruebas)
AUTHORIZED_USERS=admin@aova.mx,test@aova.mx
TEMP_PASSWORD=aova2024_temp

# ========================================
# CONFIGURACIÓN DE SOAP (EMBLER)
# ========================================
# Servicios SOAP para inventario (configurar cuando esté disponible)
EMBLER_WSDL_URL=http://tu_servidor_soap/embler?wsdl
EMBLER_ENDPOINT_URL=http://tu_servidor_soap/embler
TOKEN_CACHE_DURATION=10
INVENTORY_CACHE_TTL=300000
SOAP_CONNECTION_RETRIES=3

# ========================================
# PUNTOS DE VENTA
# ========================================
DEFAULT_POS_ID=SAT
VALID_POS_IDS=ME,CUA,ECA,IZT,LIND,PORT,QRO,SAT,TPN,VC

# Credenciales POS (JSON format)
POS_CREDENTIALS={"SAT":{"user":"test","pwd":"test"},"ME":{"user":"test","pwd":"test"}}

# ========================================
# APIS EXTERNAS
# ========================================
# API Ninjas para decodificación VIN (opcional)
API_NINJAS_KEY=tu_api_ninjas_key_aqui

# ========================================
# CONFIGURACIÓN DE LOGS
# ========================================
LOG_LEVEL=info
ENABLE_DETAILED_LOGS=true

# ========================================
# RATE LIMITING
# ========================================
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# ========================================
# INSTRUCCIONES PARA CONFIGURAR:
# ========================================
# 1. Copia este archivo como .env
# 2. Reemplaza las variables "tu_*_aqui" con valores reales
# 3. Para empezar, SOLO necesitas:
#    - OPEN_ROUTER_API_KEY (obtener gratis en https://openrouter.ai/keys)
#    - JWT_SECRET (generar uno seguro: openssl rand -hex 32)
# 4. Las variables de WhatsApp se configuran cuando tengas el webhook
# 5. Reinicia el servidor: npm run dev

# ========================================
# CONFIGURACIÓN DEL WEBHOOK WHATSAPP:
# ========================================
# En Meta for Developers:
# - Callback URL: https://tu-dominio.com/api/chat/webhook
# - Verify token: el valor que pongas en WEBHOOK_VERIFY_TOKEN
# - NO marcar "Attach a client certificate"

# ========================================
# VARIABLES CRÍTICAS PARA PRODUCCIÓN:
# ========================================
# - WHATSAPP_ACCESS_TOKEN
# - WHATSAPP_PHONE_NUMBER_ID
# - WEBHOOK_VERIFY_TOKEN
# - OPEN_ROUTER_API_KEY
# - JWT_SECRET
# - DATABASE_URL (PostgreSQL en producción)

# ========================================
# PARA PRUEBAS LOCALES SIN WHATSAPP:
# ========================================
# Puedes usar todas las funciones excepto el webhook real
# El sistema tiene simuladores para desarrollo 